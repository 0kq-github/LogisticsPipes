<project name="LogisticsPipes" default="extract">
	<!-- Properties -->
	<property name="build.dir"            value="build"/>

	<property name="download.dir"         value="${build.dir}/download"/>
	<property name="api.dir"              value="api"/>

	<property name="forestry.dir"         value="${build.dir}/unpack/forestry"/>
	<property name="ic2.dir"              value="${build.dir}/unpack/ic2"/>
	<property name="cc.dir"               value="${build.dir}/unpack/cc"/>
	<property name="thaumcraft.dir"       value="${build.dir}/unpack/thaumcraft"/>

	<property name="downloadserver"       value="http://rs485.theZorro266.com"/>
	<property name="downloadserver.dir"   value="external/"/>
	<property name="downloadserver.full"  value="${downloadserver}/${downloadserver.dir}"/>

	<property name="forestry.version"     value="2.3.0.0"/>
	<property name="ic2.version"          value="2.0.143-experimental"/>
	<property name="cc.version"           value="1.62"/>
	<property name="thaumcraft.version"   value="4.0.0"/>

	<target name="download">
		<mkdir dir="${download.dir}"/>
		<echo message="Download started"/>
		<get src="${downloadserver.full}forestry-api-${forestry.version}.zip" dest="${download.dir}" usetimestamp="True"/>
		<get src="${downloadserver.full}industrialcraft-2-api_${ic2.version}.zip" dest="${download.dir}" usetimestamp="True"/>
		<get src="${downloadserver.full}ComputerCraftAPI${cc.version}.zip" dest="${download.dir}" usetimestamp="True"/>
		<get src="${downloadserver.full}Thaumcraft${thaumcraft.version}-API.zip" dest="${download.dir}" usetimestamp="True"/>
		<echo message="Download finished"/>
	</target>

	<target name="extract" depends="download">
		<unzip dest="${forestry.dir}" failOnEmptyArchive="true">
			<fileset dir="${download.dir}">
				<include name="forestry-api-${forestry.version}.zip"/>
			</fileset>
		</unzip>

		<unzip dest="${ic2.dir}" failOnEmptyArchive="true">
			<fileset dir="${download.dir}">
				<include name="industrialcraft-2-api_${ic2.version}.zip"/>
			</fileset>
		</unzip>

		<unzip dest="${cc.dir}" failOnEmptyArchive="true">
			<fileset dir="${download.dir}">
				<include name="ComputerCraftAPI${cc.version}.zip"/>
			</fileset>
		</unzip>

		<unzip dest="${thaumcraft.dir}" failOnEmptyArchive="true">
			<fileset dir="${download.dir}">
				<include name="Thaumcraft${thaumcraft.version}-API.zip"/>
			</fileset>
		</unzip>

		<echo message="Unpacking finished"/>

		<!-- Copy Forestry API source -->
		<copy todir="${api.dir}">
			<fileset dir="${forestry.dir}"/>
		</copy>

		<echo message="Copied Forestry API"/>

		<!-- Copy IC2 API source -->
		<copy todir="${api.dir}">
			<fileset dir="${ic2.dir}"/>
		</copy>

		<echo message="Copied IC2 API"/>

		<!-- Copy CC API source -->
		<copy todir="${api.dir}">
			<fileset dir="${cc.dir}"/>
		</copy>

		<echo message="Copied CC API"/>

		<!-- Copy ThaumCraft API source -->
		<copy todir="${api.dir}/thaumcraft">
			<fileset dir="${thaumcraft.dir}"/>
		</copy>

		<echo message="Copied ThaumCraft API"/>
	</target>
</project>
